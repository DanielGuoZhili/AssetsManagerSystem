# ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ–‡æ¡£

## ğŸ“ æ¶æ„æ¦‚è§ˆ

æœ¬é¡¹ç›®é‡‡ç”¨ **pnpm Monorepo** æ¶æ„ï¼Œå°†åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„åŒ…ï¼Œæ¯ä¸ªåŒ…èŒè´£æ˜ç¡®ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Asset Manager System                   â”‚
â”‚                    (Monorepo Root)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend    â”‚   â”‚    Shared     â”‚   â”‚ Next Module   â”‚
â”‚  (React App)  â”‚â”€â”€â–¶â”‚   (Utils)     â”‚â—€â”€â”€â”‚  (Reserved)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ åŒ…ç»“æ„è¯´æ˜

### 1. Frontend Package (`@asset-manager/frontend`)

**èŒè´£**: ä¸»å‰ç«¯åº”ç”¨ï¼Œæä¾›ç”¨æˆ·äº¤äº’ç•Œé¢

**æŠ€æœ¯æ ˆ**:
- React 18
- TypeScript
- Vite
- Ant Design 5
- React Router 6

**ç›®å½•ç»“æ„**:
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Home/        # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ Dashboard/   # ä»ªè¡¨ç›˜
â”‚   â”‚   â””â”€â”€ Login/       # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ components/      # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ layouts/         # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ MainLayout/  # ä¸»å¸ƒå±€ï¼ˆä¾§è¾¹æ +é¡¶æ ï¼‰
â”‚   â”œâ”€â”€ router/          # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ state/           # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ AuthContext  # è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ hooks/           # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ request.ts   # HTTP è¯·æ±‚å°è£…
â”‚   â””â”€â”€ types/           # ç±»å‹å®šä¹‰
â”œâ”€â”€ public/              # é™æ€èµ„æº
â”œâ”€â”€ index.html           # HTML å…¥å£
â”œâ”€â”€ vite.config.ts       # Vite é…ç½®
â””â”€â”€ package.json
```

**æ ¸å¿ƒåŠŸèƒ½**:
- ç”¨æˆ·è®¤è¯ä¸æˆæƒ
- èµ„äº§æ•°æ®å±•ç¤º
- æ•°æ®å¯è§†åŒ–
- å“åº”å¼å¸ƒå±€

### 2. Shared Package (`@asset-manager/shared`)

**èŒè´£**: æä¾›è·¨åŒ…å…±äº«çš„å·¥å…·å‡½æ•°ã€ç±»å‹å®šä¹‰å’Œé€šç”¨é€»è¾‘

**æŠ€æœ¯æ ˆ**:
- TypeScript

**ç›®å½•ç»“æ„**:
```
shared/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ hello.ts         # å·¥å…·å‡½æ•°
â”‚   â”‚       â”œâ”€â”€ hello()
â”‚   â”‚       â”œâ”€â”€ formatCurrency()
â”‚   â”‚       â””â”€â”€ formatDate()
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ common.ts        # é€šç”¨ç±»å‹
â”‚   â”‚       â”œâ”€â”€ ApiResponse
â”‚   â”‚       â”œâ”€â”€ User
â”‚   â”‚       â”œâ”€â”€ Asset
â”‚   â”‚       â””â”€â”€ AssetType
â”‚   â””â”€â”€ index.ts             # ç»Ÿä¸€å¯¼å‡º
â””â”€â”€ package.json
```

**æ ¸å¿ƒå¯¼å‡º**:
- å·¥å…·å‡½æ•°ï¼š`hello`, `formatCurrency`, `formatDate`
- ç±»å‹å®šä¹‰ï¼š`User`, `Asset`, `AssetType`, `ApiResponse`
- å¸¸é‡å’Œæšä¸¾

**ä½¿ç”¨ç¤ºä¾‹**:
```typescript
import { hello, formatCurrency, User } from '@asset-manager/shared'

const message = hello()
const price = formatCurrency(1234.56)
```

### 3. Next-Module Package (`@asset-manager/next-module`)

**èŒè´£**: é¢„ç•™çš„ Next.js æ¨¡å—ï¼Œç”¨äºæœªæ¥ SSR/SSG æ‰©å±•

**çŠ¶æ€**: å½“å‰ä¸ºé¢„ç•™çŠ¶æ€ï¼Œæœªå®ç°

**è§„åˆ’ç”¨é€”**:
- æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰
- é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰
- API è·¯ç”±
- SEO ä¼˜åŒ–

## ğŸ”„ æ•°æ®æµ

### è®¤è¯æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     login()      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Login  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ AuthContext  â”‚
â”‚  Page   â”‚                   â”‚   (State)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚ setUser()
                                     â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ localStorage â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚ persist
                                     â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   Browser    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¡µé¢è·¯ç”±ä¿æŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      è®¿é—®      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Router      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ Protected   â”‚
                            â”‚   Route     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                             â”‚
              isAuthenticated?               isAuthenticated?
                    â”‚                             â”‚
                  true                          false
                    â”‚                             â”‚
                    â–¼                             â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Page      â”‚               â”‚  Redirect   â”‚
            â”‚  Component  â”‚               â”‚  to /login  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ è®¾è®¡åŸåˆ™

### 1. æ¨¡å—åŒ–è®¾è®¡
- æ¯ä¸ªåŒ…èŒè´£å•ä¸€ã€è¾¹ç•Œæ¸…æ™°
- é€šè¿‡ workspace åè®®å®ç°åŒ…é—´ä¾èµ–
- ä¾¿äºç‹¬ç«‹å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²

### 2. ç±»å‹å®‰å…¨
- å…¨é¢ä½¿ç”¨ TypeScript
- å…±äº«ç±»å‹å®šä¹‰ï¼Œé¿å…é‡å¤
- ç¼–è¯‘æ—¶é”™è¯¯æ£€æµ‹

### 3. ä»£ç å¤ç”¨
- é€šç”¨é€»è¾‘æŠ½è±¡åˆ° shared åŒ…
- é¿å…ä»£ç é‡å¤
- ç»Ÿä¸€å·¥å…·å‡½æ•°å’Œç±»å‹å®šä¹‰

### 4. å¯æ‰©å±•æ€§
- Monorepo æ¶æ„æ˜“äºæ·»åŠ æ–°åŒ…
- é¢„ç•™ next-module ç”¨äºæœªæ¥æ‰©å±•
- æ’ä»¶åŒ–çš„ç»„ä»¶è®¾è®¡

### 5. å¼€å‘ä½“éªŒ
- ç»Ÿä¸€çš„å¼€å‘å‘½ä»¤
- çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰
- å¿«é€Ÿçš„æ„å»ºé€Ÿåº¦

## ğŸ”— ä¾èµ–å…³ç³»

```
frontend
  â”‚
  â”œâ”€â”€â”€ @asset-manager/shared (workspace:*)
  â”œâ”€â”€â”€ react
  â”œâ”€â”€â”€ react-dom
  â”œâ”€â”€â”€ react-router-dom
  â”œâ”€â”€â”€ antd
  â””â”€â”€â”€ vite

shared
  â”‚
  â””â”€â”€â”€ typescript (dev)

next-module
  â”‚
  â””â”€â”€â”€ (é¢„ç•™ï¼Œæš‚æ— ä¾èµ–)
```

## ğŸ“Š æ„å»ºæµç¨‹

### å¼€å‘æ¨¡å¼

```
pnpm dev
    â”‚
    â”œâ”€â”€â”€ è§£æ workspace
    â”‚
    â”œâ”€â”€â”€ å®‰è£…ä¾èµ–
    â”‚
    â”œâ”€â”€â”€ é“¾æ¥ shared åˆ° frontend
    â”‚
    â””â”€â”€â”€ å¯åŠ¨ Vite Dev Server
         â”‚
         â”œâ”€â”€â”€ ç›‘å¬æ–‡ä»¶å˜åŒ–
         â”œâ”€â”€â”€ çƒ­æ¨¡å—æ›¿æ¢
         â””â”€â”€â”€ æä¾›å¼€å‘æœåŠ¡å™¨
```

### ç”Ÿäº§æ„å»º

```
pnpm build
    â”‚
    â”œâ”€â”€â”€ ç¼–è¯‘ TypeScript
    â”‚
    â”œâ”€â”€â”€ æ‰“åŒ…èµ„æºï¼ˆViteï¼‰
    â”‚
    â”œâ”€â”€â”€ ä»£ç åˆ†å‰²
    â”‚    â”œâ”€â”€â”€ react-vendor
    â”‚    â””â”€â”€â”€ antd-vendor
    â”‚
    â”œâ”€â”€â”€ å‹ç¼©ä¼˜åŒ–
    â”‚
    â””â”€â”€â”€ è¾“å‡º dist/
```

## ğŸš€ éƒ¨ç½²æ¶æ„

### å½“å‰æ¶æ„ï¼ˆCSRï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CDN/é™æ€   â”‚
â”‚   æ–‡ä»¶æœåŠ¡å™¨  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ é™æ€èµ„æº
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â”‚   (React)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ API è¯·æ±‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API â”‚
â”‚   (æœªæ¥)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æœªæ¥æ¶æ„ï¼ˆSSR - ä½¿ç”¨ next-moduleï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·è¯·æ±‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Next.js     â”‚
â”‚   Server     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ SSR/SSG
       â”‚
       â””â”€â”€â”€ API Routes
              â”‚
              â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   Database   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ æœ€ä½³å®è·µ

### 1. æ·»åŠ æ–°é¡µé¢
```typescript
// 1. åˆ›å»ºé¡µé¢ç»„ä»¶
packages/frontend/src/pages/NewPage/index.tsx

// 2. æ·»åŠ è·¯ç”±
packages/frontend/src/router/index.tsx

// 3. æ·»åŠ èœå•é¡¹
packages/frontend/src/layouts/MainLayout.tsx
```

### 2. æ·»åŠ å…±äº«å·¥å…·
```typescript
// 1. åœ¨ shared ä¸­æ·»åŠ å‡½æ•°
packages/shared/src/utils/newUtil.ts

// 2. å¯¼å‡º
packages/shared/src/index.ts

// 3. åœ¨ frontend ä¸­ä½¿ç”¨
import { newUtil } from '@asset-manager/shared'
```

### 3. çŠ¶æ€ç®¡ç†
```typescript
// ä½¿ç”¨ React Context
// 1. åˆ›å»º Context
packages/frontend/src/state/NewContext.tsx

// 2. åœ¨ App.tsx ä¸­æä¾›
<NewContextProvider>

// 3. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
const { state, actions } = useNewContext()
```

## ğŸ” å®‰å…¨è€ƒè™‘

- âœ… è·¯ç”±æƒé™ä¿æŠ¤
- âœ… Token å­˜å‚¨ï¼ˆlocalStorageï¼‰
- ğŸš§ HTTPS ä¼ è¾“ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- ğŸš§ XSS é˜²æŠ¤
- ğŸš§ CSRF é˜²æŠ¤
- ğŸš§ API è¯·æ±‚ç­¾å

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°
- âœ… ä»£ç åˆ†å‰²ï¼ˆVite è‡ªåŠ¨ï¼‰
- âœ… æ‡’åŠ è½½è·¯ç”±
- âœ… Vendor åˆ†ç¦»

### å¾…ä¼˜åŒ–
- ğŸš§ å›¾ç‰‡æ‡’åŠ è½½
- ğŸš§ è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§åˆ—è¡¨ï¼‰
- ğŸš§ Service Workerï¼ˆPWAï¼‰
- ğŸš§ CDN åŠ é€Ÿ

## ğŸ“ å­¦ä¹ èµ„æº

- [Vite å®˜æ–¹æ–‡æ¡£](https://vitejs.dev/)
- [React å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [Ant Design ç»„ä»¶åº“](https://ant.design/)
- [pnpm Workspace](https://pnpm.io/workspaces)
- [TypeScript æ‰‹å†Œ](https://www.typescriptlang.org/)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2024

